<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<search>
    
     <entry>
        <title>DroneCI&#43;Githubå…¥å‘æŒ‡åŒ—</title>
        <url>https://blog.thewinds.cn/post/droneci&#43;github%E5%85%A5%E5%9D%91%E6%8C%87%E5%8C%97/</url>
        <categories>
          <category>æŠ€æœ¯</category>
        </categories>
        <tags>
          <tag>æŠ€æœ¯</tag><tag>Drone</tag><tag>CI</tag><tag>docker</tag>
        </tags>
        <content type="html">  DroneCI&#43;Githubå…¥å‘æŒ‡åŒ— ##ç®€ä»‹
 Automate Software Testing and Delivery Drone is a self-service Continuous Delivery platform for busy development teams.
 Droneæ˜¯ä¸€ä¸ªä¸ºç¹å¿™çš„å¼€å‘å›¢é˜Ÿæä¾›çš„è‡ªåŠ©å¼è¿ç»­äº¤ä»˜å¹³å°ã€‚
é™¤äº†Droneç›®å‰åšçš„æ¯”è¾ƒæˆç†Ÿçš„è¿˜æœ‰Gitlab-CIã€Jenkinsã€æœ€è¿‘æ–°æ¨å‡ºçš„Github-Actionsç­‰ã€‚å› ä¸ºDroneå ç”¨çš„èµ„æºæ¯”è¾ƒå°‘ï¼Œå¹¶ä¸”å–œæ¬¢å®ƒçš„å®¹å™¨å³æ’ä»¶çš„ç†å¿µï¼Œ(æ˜¯æˆ‘å¤§Golangå†™çš„)æ‰€ä»¥é€‰æ‹©ç”¨å®ƒæ¥ä½“éªŒä¸€ä¸‹CIã€‚
ï¼ä½†æ˜¯ä¸å¾—ä¸åæ§½çš„æ˜¯Droneçš„æ–‡æ¡£åšçš„å¾ˆçƒ‚ã€‚ã€‚æ‰€ä»¥å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½è®©ä½ å°‘èµ°å¼¯è·¯ğŸ˜‡
æœ¬æ–‡ç”¨çš„æ˜¯Droneæœ€æ–°ç‰ˆæœ¬,ä¸æ˜¯ç½‘ä¸Šå¾ˆå¤š1.0ä¹‹å‰çš„ç‰ˆæœ¬,æ ¹æ®è¿™ä¸ªæ•™ç¨‹èµ°ä¸‹å»åº”è¯¥ä¸ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ã€‚
é…ç½® æ•´ä¸ªCIæµç¨‹éœ€è¦é€šè¿‡ git hookæ¥è§¦å‘,Droneæ”¯æŒGithubã€GitLabã€Giteaã€Gogsã€Bitbucket Cloudã€Bitbucket Serverå‡ ç§SCM(source control management),æœŸåˆæˆ‘æ˜¯ä½¿ç”¨gogsæ¥æ­å»ºçš„ï¼Œç”±äºhttpsè¯ä¹¦é—®é¢˜äº§ç”Ÿçš„x509é”™è¯¯æœ€ç»ˆæ”¾å¼ƒäº†gogsæ–¹æ¡ˆï¼Œæœ€ç»ˆä½¿ç”¨çš„æ˜¯github&#43;droneã€‚
Githubç›¸å…³é…ç½® Droneå’ŒGithubäº¤äº’éœ€è¦é€šè¿‡OAuthè¿›è¡Œé‰´æƒ,æ‰€ä»¥è¦å…ˆç”³è¯·ä¸€ä¸ªOAuthåº”ç”¨ã€‚
æ‰“å¼€github.comç‚¹å‡»å¤´åƒ,é€‰æ‹©Settings / Developer settings / OAuth Apps,ç„¶åç‚¹å‡»New OAuth Appåˆ›å»ºOAuthåº”ç”¨ã€‚
å…¶ä¸­http://cici.xxxx.comæ˜¯ä½ éƒ¨ç½²Droneçš„åŸŸåï¼Œæ³¨æ„callback url ä¸è¦å¡«é”™ã€‚
ç„¶åæ³¨å†Œåº”ç”¨,è®°å½•ä¸‹å…¶ä¸­çš„ClientIDå’ŒClientSecretä¸‹é¢è¦ç”¨åˆ°
docker-composeç›¸å…³é…ç½® æˆ‘è¿™é‡Œæ˜¯é€šè¿‡dockerçš„æ–¹å¼å®‰è£…çš„ï¼Œdocker-composeç¼–æ’ã€‚
å®‰è£…Droneéœ€è¦ä¸€ä¸ªdrone-serverå’Œdrone-runnerï¼Œ
 drone-runnerä¸æ˜¯å¿…é€‰çš„,å®˜æ–¹ä¸æ¨èå§runnerå’Œserverå®‰è£…åœ¨ä¸€ä¸ªå®ä¾‹ä¸Šï¼Œå¦‚æœä½ å®‰è£…åˆ°ä¸€ä¸ªå®ä¾‹ä¸Šçš„è¯å¯ä»¥è®¾ç½®DRONE_AGENTS_ENABLED=false,drone-serverå°†ä¼šä½œä¸ºé»˜è®¤çš„runner,æˆ‘è¿™ä¸ºäº†æ¼”ç¤º,runnerå’Œserveræ˜¯åœ¨ä¸€ä¸ªåŒæœåŠ¡å™¨ä¸Šçš„ã€‚
 docker-compose.yml æ–‡ä»¶:
version: &#39;2&#39; services: drone-server: image: drone/drone:latest container_name: drone-server networks: - dronenet	# è®©drone-serverå’Œdrone-agentå¤„äºä¸€ä¸ªç½‘ç»œä¸­,æ–¹ä¾¿è¿›è¡ŒRPCé€šä¿¡ ports: - &#39;10081:80&#39;	# Webç®¡ç†é¢æ¿çš„å…¥å£ PROTO=http æ—¶ä½¿ç”¨è¯¥ç«¯å£ - &#39;10082:443&#39;	# Webç®¡ç†é¢æ¿çš„å…¥å£ PROTO=https æ—¶ä½¿ç”¨è¯¥ç«¯å£ - &#39;10083:9000&#39;	# RPCæœåŠ¡ç«¯å£ volumes: - /var/run/docker.sock:/var/run/docker.sock	# docker.sock [1] - /var/data/drone/:/var/lib/drone	# droneæ•°æ®å­˜æ”¾è·¯å¾„ environment: - DRONE_AGENTS_ENABLED=true	# ä½¿ç”¨Runner - DRONE_GITHUB_SERVER=https://github.com	# githubçš„åœ°å€ - DRONE_GITHUB_CLIENT_ID=${DRONE_GITHUB_CLIENT_ID}	# ä¸Šä¸€æ­¥è·å¾—çš„ClientID - DRONE_GITHUB_CLIENT_SECRET=${DRONE_GITHUB_CLIENT_SECRET}	# ä¸Šä¸€æ­¥è·å¾—çš„ClientSecret - DRONE_RPC_SECRET=${DRONE_RPC_SECRET}	# RPCç§˜é’¥	[2] - DRONE_SERVER_HOST=${DRONE_SERVER_HOST}	# RPCåŸŸå(åœ¨ä¸€ä¸ªå®ä¾‹ä¸Šå¯ä»¥ä¸ç”¨) - DRONE_SERVER_PROTO=${DRONE_SERVER_PROTO}	# git webhookä½¿ç”¨çš„åè®®(æˆ‘å»ºè®®http) - DRONE_OPEN=true	# å¼€å‘drone - DRONE_DATABASE_DATASOURCE=/var/lib/drone/drone.sqlite	# æ•°æ®åº“æ–‡ä»¶ - DRONE_DATABASE_DRIVER=sqlite3	# æ•°æ®åº“é©±åŠ¨,æˆ‘è¿™é‡Œé€‰çš„sqlite - DRONE_DEBUG=true	# è°ƒè¯•ç›¸å…³,éƒ¨ç½²çš„æ—¶å€™å»ºè®®å…ˆæ‰“å¼€ - DRONE_LOGS_DEBUG=true	# è°ƒè¯•ç›¸å…³,éƒ¨ç½²çš„æ—¶å€™å»ºè®®å…ˆæ‰“å¼€ - DRONE_LOGS_TRACE=true	# è°ƒè¯•ç›¸å…³,éƒ¨ç½²çš„æ—¶å€™å»ºè®®å…ˆæ‰“å¼€ - DRONE_USER_CREATE=username:TheWinds,admin:true	# åˆå§‹ç®¡ç†å‘˜ç”¨æˆ· - TZ=Asia/Shanghai	# æ—¶åŒº restart: always drone-agent: image: drone/agent:latest container_name: drone-agent networks: - dronenet	# è®©drone-serverå’Œdrone-agentå¤„äºä¸€ä¸ªç½‘ç»œä¸­,æ–¹ä¾¿è¿›è¡ŒRPCé€šä¿¡ depends_on: - drone-server volumes: - /var/run/docker.sock:/var/run/docker.sock # docker.sock [1] environment: - DRONE_RPC_SERVER=http://drone-server	# RPCæœåŠ¡åœ°å€ - DRONE_RPC_SECRET=${DRONE_RPC_SECRET}	# RPCç§˜é’¥ - DRONE_RPC_PROTO=${DRONE_RPC_PROTO}	# RPCåè®®(http || https) - DRONE_RUNNER_CAPACITY=2	# æœ€å¤§å¹¶å‘æ‰§è¡Œçš„ pipeline æ•° - DRONE_DEBUG=true	# è°ƒè¯•ç›¸å…³,éƒ¨ç½²çš„æ—¶å€™å»ºè®®å…ˆæ‰“å¼€ - DRONE_LOGS_DEBUG=true	# è°ƒè¯•ç›¸å…³,éƒ¨ç½²çš„æ—¶å€™å»ºè®®å…ˆæ‰“å¼€ - DRONE_LOGS_TRACE=true	# è°ƒè¯•ç›¸å…³,éƒ¨ç½²çš„æ—¶å€™å»ºè®®å…ˆæ‰“å¼€ - TZ=Asia/Shanghai restart: always networks: dronenet:	# è®©drone-serverå’Œdrone-agentå¤„äºä¸€ä¸ªç½‘ç»œä¸­,æ–¹ä¾¿è¿›è¡ŒRPCé€šä¿¡   **[1] ** å› ä¸ºæ’ä»¶æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œè¦åœ¨å®¹å™¨ä¸­(docker-serverã€drone-runnere)ä¸­è¿è¡Œå®¹å™¨ã€‚å°†docker.sockæŒ‚è½½åˆ°å®¹å™¨ä¸­ï¼Œå¯ä»¥è®©å®¹å™¨é€šè¿‡docker unix socket APIå¾—åˆ°ç®¡ç†å®¹å™¨çš„èƒ½åŠ›ã€‚ [2] ä½ å¯ä»¥é€šè¿‡ openssl rand -hex 16 è¿™ä¸ªå‘½ä»¤éšæœºç”Ÿæˆç§˜é’¥  .envæ–‡ä»¶:
DRONE_GITHUB_CLIENT_ID=your_github_client_id DRONE_GITHUB_CLIENT_SECRET=your_github_client_secret DRONE_RPC_SECRET=your_rpc_secret DRONE_SERVER_HOST=cici.xxxx.com DRONE_SERVER_PROTO=http DRONE_RPC_SERVER=rpc.cici.xxxx.com DRONE_RPC_PROTO=http  å¯åŠ¨ å°†docker-compose.ymlå’Œ.envæ–‡ä»¶ä¸Šä¼ è‡³æœåŠ¡å™¨åŒä¸€ç›®å½•,ç„¶åæ‰§è¡Œ
docker-compose up -d  å¯åŠ¨æœåŠ¡,ä¸€èµ·é¡ºåˆ©çš„è¯æ‰“å¼€ä½ çš„åŸŸåä½ å°†ä¼šçœ‹åˆ°
OAuthçš„æˆæƒé¡µé¢,è¿›è¡Œæˆæƒä¹‹åå°±å¯ä»¥çœ‹åˆ°ç®¡ç†é¢æ¿äº† ğŸ’œ
ä½¿ç”¨ åŸºæœ¬ä½¿ç”¨åŸºæœ¬ä¸Šå‚è€ƒhttps://docs.drone.io/ä¸Šé¢çš„æ–‡æ¡£å°±å¯ä»¥äº†ï¼Œæ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œä¸‹é¢æˆ‘ä¸»è¦æƒ³è¯´ä¸€ä¸‹Secretç®¡ç†å’Œç§æœ‰ä»“åº“çš„ä½¿ç”¨æ–¹æ³•ã€‚
###Secretç®¡ç†
CIå·¥ä½œæµç¼–æ’æ˜¯å†™åœ¨ä»“åº“ä¸­çš„.drone.ymlä¸­çš„,å¦‚æœæˆ‘ä»¬æƒ³è¿›è¡Œä¸€äº›ç§æœ‰çš„æ“ä½œ(æ¯”å¦‚ssh_key,ç”¨äºé€šçŸ¥çš„è´¦å·å¯†ç â€¦)å°±è¦æŠŠè¿™äº›æ•æ„Ÿä¿¡æ¯å†™åœ¨ymlé‡Œï¼Œè€Œè¿™äº›ç§æœ‰ä¿¡æ¯çš„æš´éœ²è‚¯å®šæ˜¯ä¸å…è®¸å‘ç”Ÿçš„ã€‚æ‰€ä»¥è¿™äº›ç§˜å¯†ä¿¡æ¯ä¸€èˆ¬åœ¨æ„å»ºè¿‡ç¨‹ä¸­ç”±CIå·¥å…·æ³¨å…¥åˆ°ç¯å¢ƒå˜é‡ä¸­çš„ã€‚
droneæ”¯æŒå¤šç§secretç®¡ç†æ–¹å¼,æœ€åŸºæœ¬å’Œæœ€æ–¹ä¾¿çš„æ–¹å¼å°±æ˜¯ç›´æ¥é€šè¿‡Webåå°è¿›è¡Œç®¡ç†ã€‚
æ‰“å¼€Repositories/your_repo_name/settings æ‰¾åˆ°Secretsé€‰é¡¹å¡,è¾“å…¥Secret Nameå’ŒSecret Valueå°±å¯ä»¥æ·»åŠ Name=&amp;gt;Valueçš„ç§˜é’¥é”®å€¼å¯¹äº†,è¿™äº›ç§˜é’¥å°†åœ¨æ„å»ºè¿‡ç¨‹ä¸­è¢«æ³¨å…¥ã€‚
ä¸‹é¢å°±æ¥è¯•ä¸€ä¸‹
 Githubåˆ›å»ºé¡¹ç›® drone_test_pub  . â”œâ”€â”€ .drone.yml â””â”€â”€ main.go   main.go  package main import ( &amp;quot;fmt&amp;quot; &amp;quot;os&amp;quot; &amp;quot;strings&amp;quot; ) func main() { aSecret := os.Getenv(&amp;quot;A_SECRET&amp;quot;) fmt.Println(aSecret) fmt.Println(reverseString(aSecret)) } func reverseString(s string) string { r := []rune(s) sb := strings.Builder{} for i := len(r) - 1; i &amp;gt;= 0; i-- { sb.WriteRune(r[i]) } return sb.String() }   .drone.yml  --- kind: pipeline type: docker name: default steps: - name: build image: golang environment: A_SECRET: from_secret: a_secret commands: - echo $$A_SECRET - go run . &amp;gt; test_secret.txt - cat test_secret.txt   Droneç®¡ç†é¢æ¿,æ¿€æ´»ä»“åº“drone_test_pub å¹¶åˆ›å»ºä¸€ä¸ªä»“åº“çº§åˆ«çš„Secret a_secret = terces elbakaepsnu  
 æ¨é€ä»£ç åˆ°GithubæŸ¥çœ‹æ„å»ºæƒ…å†µ  â–¶ git commit --allow-empty [master 0460b0d] test push â–¶ git push Enumerating objects: 1, done. Counting objects: 100% (1/1), done. Writing objects: 100% (1/1), 179 bytes | 179.00 KiB/s, done. Total 1 (delta 0), reused 0 (delta 0) To github.com:TheWinds/drone_test_pub.git 0ccca9b..0460b0d master -&amp;gt; master  4.æ„å»ºç»“æœ
ä»æ´»åŠ¨æµé‡Œå¯ä»¥çœ‹åˆ°,å·²ç»æˆåŠŸè¿›è¡Œäº†å…‹éš†å’Œæ„å»º,é¦–å…ˆæ˜¯è¿›è¡Œäº†é»˜è®¤çš„cloneæ­¥éª¤ï¼Œç„¶åè¿›è¡Œçš„buildæ­¥éª¤ã€‚
ä»buildçš„æ‰§è¡Œç»“æœæ¥çœ‹,æˆ‘ä»¬ echo $A_SECRETçš„æ—¶å€™å¾—åˆ°çš„æ˜¯ä¸€ä¸ªæ©ç ********,ç„¶ååœ¨main.goå°† $A_SECRETè¿›è¡Œåè½¬åå¾—åˆ°äº†unspeakable secretè¯´æ˜å·²ç»æˆåŠŸå¾—åˆ°äº†æ³¨å…¥çš„Secretã€‚
é€šè¿‡æŸ¥çœ‹Drone-Runtimeçš„æºç å¯ä»¥çœ‹åˆ°,è¿è¡Œçš„æ—¶å€™å¯¹äºè¦æ˜¾ç¤ºåœ¨æ§åˆ¶å°çš„å†…å®¹,éƒ½ä¼šæŠŠSecret Value åŠ å…¥åˆ°string replacerä¸­,ç»Ÿä¸€è¢«æ›¿æ¢ä¸ºæ©ç ********ã€‚ç„¶è€Œè¿™å¹¶æ²¡æœ‰ä»€ä¹ˆåµç”¨,é€šè¿‡å­—ç¬¦ä¸²æ“ä½œå°±èƒ½ä½¿å…¶è¾“å‡ºæœªè¿›è¡Œæ©ç çš„Secretï¼Œç„¶åå°±èƒ½è¿›è¡Œè¿˜åŸäº†ã€‚ã€‚


å…‹éš†ç§æœ‰ä»“åº“ Droneé»˜è®¤ä¼šæœ‰ä¸€ä¸ªCloneçš„æ­¥éª¤,è¦å…‹éš†ç§æœ‰ä»“åº“è¦æŠŠè¿™ä¸ªæ­¥éª¤å…³é—­ã€‚
ç„¶åæŠŠGithubè¯¥ä»“åº“çš„ deploy_keyå¯¹åº”çš„ç§é’¥è®¾ä¸ºSecretæ³¨å…¥åˆ° SSH_KEY ç¯å¢ƒå˜é‡ä¸­ã€‚
æ¥ä¸‹æ¥åˆ›å»ºä¸€ä¸ªcloneçš„æ­¥éª¤,æˆ‘è¿™é‡Œä½¿ç”¨çš„æ˜¯alpine/gitçš„é•œåƒï¼Œé€šè¿‡echo &amp;quot;$$SSH_KEY&amp;quot; &amp;gt; /root/.ssh/id_rsaå§ç§é’¥å†™å…¥åˆ°id_rsaä¸­ï¼Œgit clone å¡«å†™ä½ çš„ç§æœ‰ä»“åº“sshåœ°å€å°±å¯ä»¥è¿›è¡Œå…‹éš†äº†ã€‚
 deploy_keyç›¸æ¯”githubçš„å…¨å±€sshkeyï¼Œå¯ä»¥æ§åˆ¶åˆ°ä»…å…‹éš†ä»“åº“çš„æƒé™ï¼Œé€‚åˆè¿›è¡Œéƒ¨ç½²æ“ä½œ,å…·ä½“æ€ä¹ˆå»è®¾ç½®æˆ‘å°±ä¸å†èµ˜è¿°äº†
ç”Ÿæˆä¸€å¯¹sshkeyå¯ä»¥ç”¨ ssh-keygen -t rsa -b 4096 -C &amp;quot;your_email&amp;quot; è¿™ä¸ªå‘½ä»¤
  .drone.yml  --- kind: pipeline type: docker name: default clone: disable: true steps: - name: clone image: alpine/git environment: SSH_KEY: from_secret: ssh_key commands: - mkdir -p /root/.ssh/ - echo &amp;quot;$$SSH_KEY&amp;quot; &amp;gt; /root/.ssh/id_rsa - chmod -R 600 /root/.ssh/ - ssh-keyscan -t rsa github.com &amp;gt;&amp;gt; ~/.ssh/known_hosts - git clone -v git@github.com:TheWinds/drone_test.git . - name: build image: golang commands: - go run . &amp;gt; hello.txt - cat hello.txt  ç»“è¯­ DroneCIæ–­æ–­ç»­ç»­æäº†å°†è¿‘ä¸€å‘¨çš„æ—¶é—´,æœŸé—´å› ä¸ºæ–‡æ¡£ä¸æ¸…æ¥šæ‰¾ä¸åˆ°é—®é¢˜è¿˜æ”¾å¼ƒäº†å‡ æ¬¡ğŸ™ƒã€‚ä½†æ˜¯éƒ½å¼€å§‹äº†ï¼Œå°±å¾ˆéš¾æ”¾å¼ƒï¼ŒæŸ¥äº†å¾ˆå¤šèµ„æ–™çœ‹äº†ä¸€ä¸‹æºç åç»ˆäºæ•´å¥½äº†ã€‚
ç¥ä½ å¥½è¿ã€‚
</content>
    </entry>
    
     <entry>
        <title>MacOSç³»ç»ŸDockeré»˜è®¤å­˜å‚¨è·¯å¾„è¿ç§»æ–¹æ³•</title>
        <url>https://blog.thewinds.cn/post/macos%E7%B3%BB%E7%BB%9Fdocker%E9%BB%98%E8%AE%A4%E5%AD%98%E5%82%A8%E8%B7%AF%E5%BE%84%E8%BF%81%E7%A7%BB%E6%96%B9%E6%B3%95/</url>
        <categories>
          <category>æŠ€æœ¯</category>
        </categories>
        <tags>
          <tag>docker</tag><tag>macos</tag>
        </tags>
        <content type="html">  MacOSç³»ç»ŸDockeré»˜è®¤å­˜å‚¨è·¯å¾„è¿ç§»æ–¹æ³•  å¯¹äºä»…æœ‰120Gçš„å›ºæ€ç¡¬ç›˜æ¥è¯´ï¼ŒDockerå ç”¨çš„å­˜å‚¨ç©ºé—´æ„Ÿåˆ°å‹åŠ›å±±å¤§ã€‚æœäº†ä¸€åœˆæ‰æ‰¾åˆ°è¿ç§»ä¿®æ”¹é»˜è®¤å­˜å‚¨ä½ç½®çš„æ–¹æ³•ï¼Œç‰¹æ­¤è®°å½•ä¸€ä¸‹ã€‚
 å…ˆè¯´ä¿®æ”¹æ–¹æ³• Docker MacOSç‰ˆæœ¬é»˜è®¤çš„å­˜å‚¨è·¯å¾„æ˜¯
~/Library/Containers/com.docker.docker/  æ€è·¯å°±æ˜¯å…ˆæŠŠè¿™ä¸ªæ–‡ä»¶å¤¹ç§»åŠ¨åˆ°å…¶ä»–ï¼ˆä½ çš„å…¶ä»–ç¡¬ç›˜æˆ–åˆ†åŒºï¼‰ä½ç½®ï¼Œç„¶åå†å°†æ–°ä½ç½®åˆ›å»ºä¸€ä¸ªè½¯é“¾æ¥åˆ°è¿™é‡Œæ¥ã€‚
ç¬¬ä¸€æ­¥å°†dockeræ–‡ä»¶å¤¹å¤åˆ¶åˆ°æ–°ä½ç½®ï¼Œå› ä¸ºsocketæ–‡ä»¶æ˜¯ä¸å…è®¸ç›´æ¥å¤åˆ¶çš„ï¼Œæ‰€ä»¥å¯ä»¥ç”¨rsyncæ¥è¿›è¡ŒåŒæ­¥å®ç°å¤åˆ¶
rsync -a ~/Library/Containers/com.docker.docker/ /Volumes/xxxx  ç¬¬äºŒæ­¥å°†åŸæ¥çš„dockeræ–‡ä»¶å¤¹é‡å‘½åä¸º com.docker.docker.old
mv com.docker.docker com.docker.docker.old  ç¬¬ä¸‰æ­¥å°†æ–°è·¯å¾„è½¯é“¾æ¥è¿‡æ¥
# cd ~/Library/Containers ln -s /Volumes/xxxx com.docker.docker  ç¬¬å››éƒ¨å¯åŠ¨dockerï¼Œå¦‚æœæ­£å¸¸å¯åŠ¨åˆ é™¤æ‰åŸæ¥çš„dockeræ–‡ä»¶å¤¹å³å¯
rm com.docker.docker.old  é¡ºä¾¿åæ§½ä¸‹ï¼Œä¸¤å¹´å‰ä¹°çš„Â¥379 ä¹°çš„120G SSDï¼Œç°åœ¨å¯ä»¥ä¹°480Gäº† ğŸ™‚
å‚è€ƒ [1] Change Docker Image Directory for Mac?
EOF </content>
    </entry>
    
     <entry>
        <title>åšå®¢æ­å»ºè®°å½•</title>
        <url>https://blog.thewinds.cn/post/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/</url>
        <categories>
          <category>æŠ€æœ¯</category>
        </categories>
        <tags>
          <tag>åšå®¢</tag><tag>git</tag><tag>hugo</tag><tag>caddy</tag>
        </tags>
        <content type="html">   ä¸€ç›´ä»¥æ¥éƒ½æƒ³æ­å»ºä¸€ä¸ªè‡ªå·±çš„åšå®¢,è®°å½•ä¸€äº›é—®é¢˜æˆ–è€…å¿ƒå¾—. åˆ©ç”¨åä¸€å‡æœŸçš„æ—¶é—´éƒ¨ç½²äº†ä¸€ä¸ªåšå®¢
 0x00 å†™ä¹‹å‰ æœ¬æ¥æƒ³ç€è‡ªå·±å†™ä¸€ä¸ªåšå®¢,èƒ½å¤Ÿæ”¯æŒé…ç½®ä¸»é¢˜æ ·å¼,è‡ªåŠ¨æŠ“å–gitä¸Šæ‰˜ç®¡çš„æ–‡ç« &amp;hellip;,åæ¥å‘ç°åˆ«äººå·²ç»åšå¾—å¾ˆå¥½äº†ï¼ˆè‡ªå·±å¤ªæ‡’ï¼‰æ¯”å¦‚ hexo,hugo æ‰€ä»¥å†³å®šé€‰æ‹©ä¸€ä¸ªé™æ€åšå®¢ç”Ÿæˆå™¨ç„¶åä¿®æ”¹ä¸€ä¸‹ä¸»é¢˜æ¥æ»¡è¶³ä¸€ä¸‹è‡ªå·±çš„éœ€æ±‚.
0x01 æœåˆ®ä¸€æ³¢ äºæ˜¯å°±å»githubä¸Šæœäº†ä¸€ä¸‹é™æ€åšå®¢ç”Ÿæˆå™¨,æ¯”è¾ƒå¥½çš„æœ‰ä¸¤ä¸ª:Hexo å’Œ Hugo Hugoæ˜¯ç”¨golangå†™çš„,èº«ä¸ºä¸€ä¸ªgolangç²‰å½“ç„¶æœæ–­é€‰æ‹©äº†ä»– å“ˆå“ˆå“ˆã€‚OKç”Ÿæˆå™¨é€‰å¥½äº†ä¹‹åä¸‹ä¸€æ­¥å°±æ˜¯å–é€‰ä¸€ä¸ªåˆé€‚çš„ä¸»é¢˜äº†ã€‚
0x02 çº ç»“. å»å®˜ç½‘çœ‹äº†ä¸€ä¸‹,ä¸»é¢˜æ˜¯ä¸å°‘ä½†æ˜¯æ„Ÿè§‰å¥½çœ‹çš„ç¡®å®ä¸å¤šã€‚æœç´¢åŠå¤©æ‰¾ä¸åˆ°ä¸€ä¸ªåˆé€‚çš„è¶³ä»¥è®©ä½ äº§ç”Ÿç®—äº†è¿˜æ˜¯è‡ªå·±æä¸€ä¸ªå§è¿™ç§å†²åŠ¨ã€‚= =| æœ€åå‘ç°äº†ä¸€ä¸ªå«Nextçš„ä¸»é¢˜ï¼Œcloneåˆ°themeç›®å½•æ„Ÿè§‰è¿˜ä¸é”™,ç„¶åå°±å¼€å§‹å„ç§é…ç½®ã€‚
é¦–å…ˆåˆ›å»ºåšå®¢ç«™ç‚¹:
mkdir blog hugo new site . hugo new post/hello.md  ç„¶å cd themes è¿›å…¥åˆ°ä¸»é¢˜ç›®å½• git clone path/to/theme/repo ç„¶åæŠŠä¸»é¢˜ä¸­çš„config.toml å¤åˆ¶åˆ°åšå®¢ æ ¹ç›®å½•  é…ç½®ä¸€ä¸‹åŸŸåç½‘ç«™ä»‹ç»ä¸ªäººä¿¡æ¯&amp;hellip;.
0x03 ä½¿ç”¨themeé‡åˆ°çš„å‘ é…ç½®å¥½ä¸»é¢˜å,è¿è¡Œ hugo è¿›è¡Œç¼–è¯‘,å‘ç°æŠ¥é”™,çœ‹äº†ä¸‹é”™è¯¯ä¿¡æ¯å¤§æ¦‚æ˜¯é‡åˆ°äº†len typed nil error,ä¹Ÿå°±æ˜¯å¯¹ä¸€ä¸ªnil çš„ æ•°ç»„å–é•¿åº¦,ç»è¿‡æ’æŸ¥å‘ç°æ˜¯å› ä¸ºæ²¡è®¾ç½®åˆ†ç±»æˆ–è€…æ ‡ç­¾å¯¼è‡´.Site.Taxonomies.categories == nil, hugoä¸»é¢˜ä½¿ç”¨çš„æ¨¡æ¿å¼•æ“æ˜¯goè‡ªå¸¦çš„æ¨¡æ¿å¼•æ“æ‰€ä»¥ç›´æ¥åœ¨æ¨¡æ¿é‡Œåˆ¤æ–­ä¸€ä¸‹æ•°ç»„æ˜¯å¦ä¸ºnil,æœç„¶æˆåŠŸã€‚é—®é¢˜è§£å†³ forkä¸€ä»½åŸä¸»é¢˜æ”¹å¥½ä¹‹åç»™ä½œè€…å‘ä¸ªPRåšä¸ªè´¡çŒ®~ ä¿®æ”¹è¿‡çš„ hugo-theme-next
0x04 ç¼–è¯‘è¿è¡Œ. åœ¨åšå®¢æ ¹ç›®å½•è¿è¡Œ hugo å‘½ä»¤åä¼šè‡ªåŠ¨æ‰«æåšæ–‡ç›®å½•å’Œä¸»é¢˜ä¸­çš„æ¨¡æ¿å’Œæ ·å¼,ç„¶åæŠŠæ‰€æœ‰çš„æ–‡ç« å’Œé¡µé¢ç”Ÿæˆé™æ€ç½‘é¡µè¾“å‡ºåˆ° public æ–‡ä»¶å¤¹,æˆ‘ä»¬åªéœ€æŠŠ public æ–‡ä»¶å¤¹ä¸­çš„å†…å®¹æ”¾åˆ°æœåŠ¡å™¨ä¸Šå³å¯ã€‚å½“ç„¶å¦‚æœæƒ³åœ¨æœ¬åœ°ç¼–è¾‘æ–‡ç« ååŠæ—¶é¢„è§ˆ,åªéœ€è¦ä½¿ç”¨hugo server å°±å¯ä»¥è‡ªåŠ¨ç›‘æ§ data,content,layouts,static ç›®å½•çš„æ”¹åŠ¨è‡ªåŠ¨è¿›è¡Œç¼–è¯‘ï¼Œæ‰“å¼€ http://localhost:1313/ å³å¯çœ‹åˆ°ç”Ÿæˆçš„åšå®¢ã€‚
0x05 éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Š å¯¹äºåšå®¢æœ€åˆçš„è®¾æƒ³å°±æ˜¯èƒ½å¤Ÿåœ¨ç¼–è¾‘è¿‡æ–‡ç« ä¹‹åä¸€ä¸ªå‘½ä»¤æ¨é€åˆ°æœåŠ¡å™¨ä¸Šã€‚æœ€ç®€å•çš„åšæ³•å°±æ˜¯ç”¨ä¸€ä¸ªGithub Pageã€‚ä½†æ˜¯åˆæƒ³æŠŠç½‘ç«™æ”¾åœ¨è‡ªå·±æœåŠ¡å™¨ä¸Š,äºæ˜¯å°±æŠŠGithubä½œä¸ºä¸€ä¸ªä¸­è½¬çš„åœ°æ–¹ã€‚ è¿™æ ·çš„è¯æœ‰ä¸¤ç§æ–¹å¼æ¥å®ç°ä¸€ç§æ˜¯ ä½¿ç”¨ Github WebHook PC ä¸Š commit åˆ°Githubä¹‹åï¼ŒGithubé€šçŸ¥æœåŠ¡å™¨è¿›è¡Œæ‹‰å–ã€‚å¦å¤–ä¸€ç§å°±æ˜¯æœåŠ¡å™¨å®šæœŸ(æ¯”å¦‚ä¸€åˆ†é’Ÿ)ä»Github pull ä¸€æ¬¡ã€‚ æœ¬ç€èŠ‚çœèµ„æºçš„æƒ³æ³•,å°±å…¥äº†ä½¿ç”¨WebHookçš„å‘,æœåŠ¡å™¨ä½¿ç”¨çš„æ˜¯Caddy,åŠ å…¥gitæ’ä»¶å’Œhugoæ’ä»¶ä¹‹åå®ç°äº†è‡ªåŠ¨æ‹‰å–ç„¶åç¼–è¯‘,ä½†æ˜¯æ•ˆæœå¹¶ä¸æ˜¯å¾ˆå¥½,å®¹æ˜“å‡ºé—®é¢˜(å…·ä½“ç»†èŠ‚å°±ä¸è¯´äº†..)ã€‚äºæ˜¯å†³å®šç”¨ç¬¬äºŒç§æ–¹å¼,æ¯åˆ†é’Ÿæ‹‰å–ä¸€æ¬¡,ç®€å•ç²—æš´ :) ã€‚Caddy é…ç½®å¦‚ä¸‹:
blog.thewinds.cn:443 { gzip #å¼€å¯gzipå‹ç¼© log /var/log/caddy/blog_thewinds_cn.log #ä¿å­˜æ—¥å¿— root /var/www/blog.thewinds.cn/public #ç½‘ç«™æ ¹ç›®å½• tls wind_ns@163.com #è‡ªåŠ¨ç”³è¯·tls git github.com/thewinds/blog { #git è¿œç¨‹ä»“åº“åœ°å€ path /var/www/blog.thewinds.cn #åŒæ­¥åˆ°æœ¬åœ°è·¯å¾„çš„åœ°å€ interval 60 #åŒæ­¥å‘¨æœŸ } }  å†æ¬¡æ„Ÿå—åˆ°äº†Caddyçš„æ¸…çˆ½é…ç½®,ç‰¹åˆ«æ˜¯ä¸€ä¸ª tls&#43;é‚®ç®±å°±å¼€å¯äº†https çˆ½~
0x06 è¿˜æ˜¯æœ‰ç‚¹æ‡’ ç°åœ¨åšå®¢åŸºæœ¬æ­å»ºå®Œæˆäº†,ä»¥åå‘å¸ƒæ–‡ç« çš„ä¸»è¦æµç¨‹å°±æ˜¯:
ä¿®æ”¹æ–°å¢/åšæ–‡ -&amp;gt; hugo é‡æ–°ç”Ÿæˆé™æ€é¡µé¢ -&amp;gt; git add -&amp;gt; git commit -&amp;gt; git push  ç„¶åæœåŠ¡å™¨å°±ä¼šè‡ªåŠ¨pullä¸‹æ¥,æ–°çš„å†…å®¹å°±å‡ºç°äº†ã€‚ è¯´å¥½çš„ä¸€ä¸ªå‘½ä»¤,æ‰€ä»¥è¿˜æ˜¯å†™ä¸ªshellå§ã€‚ã€‚
echo &amp;quot;æ›´æ–°è¯´æ˜:$1&amp;quot; hugo &amp;amp;&amp;amp; git add . &amp;amp;&amp;amp; git commit -m &amp;quot;$1&amp;quot; &amp;amp;&amp;amp; git push  ä¿å­˜ä¸º push_plog.sh
Ok ä»¥åå†™å¥½æ–‡ç« ç›´æ¥ æ‰§è¡Œ ./push_plog.sh  æ›´æ–°è¯´æ˜å°±å¥½äº†ã€‚
</content>
    </entry>
    
     <entry>
        <title>Shadowshocksçˆ¬æ¢¯æŒ‡å—</title>
        <url>https://blog.thewinds.cn/post/shadowshocks%E7%88%AC%E6%A2%AF%E6%8C%87%E5%8D%97/</url>
        <categories>
          <category>æŠ€æœ¯</category>
        </categories>
        <tags>
          <tag>ç§‘å­¦ä¸Šç½‘</tag>
        </tags>
        <content type="html">   ä½œä¸ºä¸€ä¸ªç¨‹åºçŒ¿æ€»æ˜¯æƒ³å»å¤–é¢çš„ä¸–ç•Œè‡ªç”±æ¢ç´¢,æ— å¥ˆå¤©æœå¢™å¤ªé«˜,è®©æŸ¥èµ„æ–™ï¼Œgithubç­‰å·¥ä½œéƒ½å˜å¾—å¾ˆå‘â€¦
æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨ShadowSocksè¿›è¡Œç¿»å¢™.
æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿›è¡Œå³å¯
 1.å®‰è£… ss-qt5 ss-qt5æ˜¯ä¸€ä¸ªå›¾å½¢åŒ–çš„shadowshockså®¢æˆ·ç«¯,
å®‰è£…ä¹‹åé€‰æ‹© æœåŠ¡å™¨=&amp;gt;æ‰“å¼€æœåŠ¡å™¨è®¾å®š,
è¾“å…¥æœåŠ¡å™¨ä¿¡æ¯å³å¯.
Linux
sudo apt-get install ss-qt5  Mac
brew install ss-qt5  2.å®‰è£…chromeæ‹“å±• å®‰è£…chromeæ‹“å±•çš„ç›®çš„æ˜¯è‡ªç”±åˆ‡æ¢å›½å†…å›½å¤–è·¯çº¿,åªæœ‰å›½å¤–èµ°ä»£ç† - æ‰“å¼€chromeåº”ç”¨å•†åº—
 ä¸‹è½½ SwitchyOmegaè¿™ä¸ªåº”ç”¨
 é€‰æ‹©æ–°å»ºæƒ…æ™¯æ¨¡å¼
 åç§°éšæ„å¡«å†™,ç±»å‹é€‰æ‹©ä»£ç†æœåŠ¡å™¨
 ç„¶åä»£ç†åè®®é€‰æ‹©SOCKS5,ä»£ç†æœåŠ¡å™¨å’Œç«¯å£å¡«ä¸Šsså®¢æˆ·ç«¯çš„ä»£ç†æœåŠ¡å™¨å’Œç«¯å£,æˆ‘è¿™é‡Œæ˜¯127.0.0.1 å’Œ 1080
 å°†ä¸ä»£ç†çš„åœ°å€åˆ—è¡¨ä¸­çš„å†…å®¹æ¸…ç©º
 æŒ‰ç…§å¦‚ä¸‹è§„åˆ™æ–°å»º
  è§„åˆ™åˆ—è¡¨åœ°å€ä¸º https://raw.githubusercontent.com/gfwlist/gfwlist/master/gfwlist.txt åˆ°æ­¤ä¸ºæ­¢,æµè§ˆå™¨å°±å¯ä»¥æ„‰å¿«çš„ç¿»å¢™äº†.
3.åœ¨ç»ˆç«¯é‡Œä½¿ç”¨ä»£ç†[å¯é€‰] å®‰è£…prioxy
sudo apt-get install privoxy  ä¿®æ”¹prioxyçš„é…ç½®æ–‡ä»¶
gedit /etc/privoxy/config  æ³¨é‡Šæ‰åŸæ¥çš„ listen-address 127.0.0.1:8118
åœ¨æœ€åæ·»åŠ 
forward-socks5 / 127.0.0.1:1080 . listen-address 127.0.0.1:8118  ç„¶åé‡å¯
sudo service privoxy restart  æœ€å åœ¨ç»ˆç«¯ä¸­ä½¿ç”¨ä»£ç†
export http_proxy=&amp;quot;127.0.0.1:8118&amp;quot; export https_proxy=&amp;quot;127.0.0.1:8118&amp;quot;  enjoy it :) </content>
    </entry>
    
     <entry>
        <title>Posts</title>
        <url>https://blog.thewinds.cn/post/</url>
        <categories>
          
        </categories>
        <tags>
          
        </tags>
        <content type="html"> </content>
    </entry>
    
</search>